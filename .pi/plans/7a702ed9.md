{
  "id": "7a702ed9",
  "title": "Harden pi-socket against hypivisor crashes + update specs + integration tests",
  "status": "draft",
  "created_at": "2026-02-24T05:00:42.060Z",
  "assigned_to_session": "404a9ba9-e567-43fd-8148-f030b297db3c",
  "steps": [
    {
      "id": 1,
      "text": "1. Harden pi-socket: wrap hypivisor ws.on('close') and ws.on('error') in boundary(), add explicit comments about agent independence",
      "done": true
    },
    {
      "id": 2,
      "text": "2. Add pi-socket unit tests: hypivisor disconnect does not affect local WSS, reconnect schedules on close, error handler does not throw",
      "done": true
    },
    {
      "id": 3,
      "text": "3. Add integration test: start hypivisor, register mock agent, kill hypivisor with SIGKILL, verify agent WSS is still serving, restart hypivisor, verify agent re-registers",
      "done": true
    },
    {
      "id": 4,
      "text": "4. Update specs/requirements.md: add R-PS-18a (hypivisor crash MUST NOT crash agent), strengthen R-CC-4, R-CC-10",
      "done": true
    },
    {
      "id": 5,
      "text": "5. Update specs/design.md: add Resilience section documenting the invariant",
      "done": true
    },
    {
      "id": 6,
      "text": "6. Update AGENTS.md files (root, pi-socket) to codify the rule",
      "done": true
    },
    {
      "id": 7,
      "text": "7. Run all tests (pi-socket + integration), build, lint, commit",
      "done": true
    }
  ]
}
