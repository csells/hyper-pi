{
  "prd": "(prompt)",
  "prompt": "Increase test coverage to 80% across hyper-pi with a focus on E2E integration tests. The key new tests needed:\n\n1. **Live pi agent lifecycle tests** - Spin up REAL pi agents (using `pi` CLI) in temp directories, verify they register with hypivisor, appear in the roster, and cleanly deregister on shutdown. Test that multiple agents in the same directory both appear.\n\n2. **Message round-trip tests (Web → TUI → Web)** - Send a message to a pi agent through the hypivisor proxy WebSocket, verify the agent receives it, and verify any response events flow back through the proxy to the dashboard WebSocket.\n\n3. **Pi-DE browser rendering tests** - Using the `surf` CLI tool, verify that Pi-DE actually renders agents in the roster, that clicking an agent shows the chat stage, and that sending a message from Pi-DE shows up.\n\n4. **TUI interaction tests** - Using tmux + sendkeys to interact with pi's terminal UI, send messages and verify they flow through pi-socket to connected WebSocket clients.\n\n5. **Cross-channel message visibility** - Send from web, verify in TUI output; send from TUI, verify in web WebSocket events.\n\n6. **Component unit test gaps** - Fill coverage gaps in pi-de (SpawnModal, initStorage, patchLit), pi-socket (index.ts main extension), and hypivisor (spawn.rs, fs_browser.rs).\n\nCurrent state: 34 pi-de tests, 27 pi-socket tests, 26 hypivisor tests, 28 integration tests = 115 total tests. Need to reach ~80% line coverage.\n\nKey constraints:\n- pi-socket is a global extension at ~/.pi/agent/extensions/pi-socket/\n- Tests must be deterministic and run in CI (no manual setup)\n- Use tmux for long-lived processes (pi agents, dev servers)\n- Use surf for browser testing\n- Multiple agents per directory is FIRST-CLASS\n- Never modify pi itself",
  "created_at": "2026-02-23T14:48:01.773Z",
  "updated_at": "2026-02-23T14:54:20.260Z",
  "task_count": 7,
  "completed_count": 1
}